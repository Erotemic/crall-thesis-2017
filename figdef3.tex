
\begin{comment}
        python -m ibeis.scripts.gen_cand_expts --exec-parse_latex_comments_for_commmands --fname figdef3.tex
\end{comment}

            
\begin{comment}
ibeis --tf _ChipMatchVisualization.show_ranked_matches --qaid 86 --clip-top=4 --saveparts --save figures3/rankedmatches.jpg --diskshow --dpi=256 --clipwhite --colorbar_=False --show_aid=False --score_precision=2 --stack_larger=True --labelsize=12 --titlesize=12 

ibeis --tf _ChipMatchVisualization.show_ranked_matches --qaid 86 --dpath ~/latex/crall-candidacy-2015 --save figures3/rankedmatches.jpg --diskshow --dpi=360 --clipwhite --figsize=12,11 --vert --adjust=.01,.05,.08,.95,.93,.18
\end{comment}
\newcommand{\rankedmatches}{
\begin{figure}[ht!]
\centering
\begin{subfigure}[h]{.8\textwidth}\centering\includegraphics[width=\textwidth]{figures3/rankedmatchesA.jpg}\caption{}\label{sub:rankedmatchesa}\end{subfigure}
~~%--
\begin{subfigure}[h]{0.4\textwidth}\centering\includegraphics[width=\textwidth]{figures3/rankedmatchesB.jpg}\caption{}\label{sub:rankedmatchesb}\end{subfigure}
~~%--
\begin{subfigure}[h]{0.4\textwidth}\centering\includegraphics[width=\textwidth]{figures3/rankedmatchesC.jpg}\caption{}\label{sub:rankedmatchesc}\end{subfigure}
\caption[\caplbl{rankedmatches}Ranked matches]{
    % ---
    \caplbl{rankedmatches} The top three ranked results from the identification algorithm. Each results shows the
    matches to a particular \name{}. The match to the \groundtrue{} name is shown in \Cref{sub:rankedmatchesa}. The
    matches to the incorrect names are shown in \Cref{sub:rankedmatchesb,sub:rankedmatchesc}. In each result, the
    query annotation is shown in the top left, the matching database annotations for a specific \name{} are shown
    in the bottom left and the right. The overall matching score is shown on the top of each result. The feature
    matches are overlaid on each result and colored by the feature correspondence score. Notice that each database
    \name{} may have a different number of annotations.
    % ---
}
\label{fig:rankedmatches}
\end{figure}
}



\begin{comment}
python -m ibeis.viz.viz_name --test-show_multiple_chips --db GZ_Master1 --aids 2811 2810 --show --notitle --no-inimage  --dpath ~/latex/crall-candidacy-2015/ --save figures3/SceneryMatch.jpg --diskshow --clipwhite --figsize=12,6 --dpi 300
python -m ibeis.viz.viz_name --test-show_multiple_chips --db GZ_Master1 --tags SceneryMatch --index 5 --show --notitle --no-inimage 

python -m ibeis.scripts.specialdraw simple_vsone_matches \
    --db GZ_Master1 --aids=2811,2810 \
    --figsize=12,6 --dpi 300 \
    --dpath ~/latex/crall-thesis-2017/ --save figures3/SceneryMatch2.jpg \
    --diskshow

\end{comment}
%\SingleImageCommand{SceneryMatch}{1}{Scenery match}{
%    An example of two different animals with appearing in front of the same
%    distinctive background, illustrating the importance of background
%    downweighting.
%}{figures3/SceneryMatch.jpg}
\newcommand{\SceneryMatch}{
\begin{figure}[ht!]
\centering
\includegraphics[width=\textwidth]{figures3/SceneryMatch2.jpg}
\caption[A scenery match]{\caplbl{SceneryMatch}
% ---
An example of two different animals with appearing in front of the same
distinctive background, illustrating the importance of background
downweighting. The matching regions are highlighted.
% ---
}
\label{fig:SceneryMatch}
\end{figure}
}



\begin{comment}
python -m ibeis gen_featweight_worker --dpath ~/latex/crall-candidacy-2015/ --saveparts --save figures3/genfeatweight.png --figsize=12,3 --dpi=180 --adjust=.15,.15,.1 --diskshow --clipwhite --label genfeatweight --db PZ_MTEST

python -m ibeis.scripts.specialdraw featweight_fig --db PZ_MTEST --aid=1 \
--dpath ~/latex/crall-thesis-2017/ --save figures3/fgweight.png \
--figsize=12,3 --dpi=300 --saveparts --diskshow 

%--adjust=.15,.15,.1

\end{comment}
\newcommand{\fgweight}{
\begin{figure}[ht!]
\centering
\begin{subfigure}[h]{0.32\textwidth}\centering\includegraphics[width=\textwidth]{figures3/fgweightA.png}\caption{}\label{sub:fgweightA}\end{subfigure}
~~% --
\begin{subfigure}[h]{0.32\textwidth}\centering\includegraphics[width=\textwidth]{figures3/fgweightB.png}\caption{}\label{sub:fgweightB}\end{subfigure}
~~% --
\begin{subfigure}[h]{0.32\textwidth}\centering\includegraphics[width=\textwidth]{figures3/fgweightC.png}\caption{}\label{sub:fgweightC}\end{subfigure}
\caption[Foregroundness weights]{\caplbl{fgweight}
% ---
Generation of foregroundness feature weights. \Cref{sub:fgweightA} shows the annotation's cropped chip.
This chip is passed to the species detector. \Cref{sub:fgweightB} shows the species detector outputs an
intensity image indicating the likelihood that each pixel belongs to the foreground. \Cref{sub:fgweightC}
shows the weighted sum of the intensity under each feature is used as that feature's foregroundness score.
}
\label{fig:fgweight}
\end{figure}
}



\begin{comment}
python -m ibeis.algo.hots.chip_match --test-show_single_namematch --qaid 1 --dpath ~/latex/crall-candidacy-2015 --save figures3/namematch.jpg --diskshow --dpi=180 --clipwhite
#
python -m ibeis.algo.hots.chip_match --test-show_single_namematch --qaid 2 --dpath ~/latex/crall-candidacy-2015 --save figures3/namematch.jpg --diskshow --dpi=180 --clipwhite
python -m ibeis.algo.hots.chip_match --test-show_single_namematch --qaid 3 --dpath ~/latex/crall-candidacy-2015 --save figures3/namematch.jpg --diskshow --dpi=180 --clipwhite
python -m ibeis.algo.hots.chip_match --test-show_single_namematch --qaid 4 --dpath ~/latex/crall-candidacy-2015 --save figures3/namematch.jpg --diskshow --dpi=180 --clipwhite
--verbose 
\end{comment}
\SingleImageCommand{namematch}{1}{Name scoring}{
    % ---
    Visualization of \nsumprefix{} \namescoring{}.
    The query annotation is at the top left.
    Each query feature matches at most one feature in the database
      annotations.
    Each line denotes a feature correspondence colored by its matching
      score.
    Feature scores from multiple views are combined into a name score
      shown on top.
    % ---
}{figures3/namematch.jpg}


\begin{comment}
ibeis sver_single_chipmatch -t default:refine_method=cv2-lmeds-homog,full_homog_checks=True -a default --qaid 18 --dpath ~/latex/crall-candidacy-2015 --save figures3/sverkpts.jpg --label sver --dpi=300 --clipwhite --diskshow --saveparts --figsize=10,10 --norefinelbl
\end{comment}
\newcommand{\sver}{
\begin{figure}[h]
\centering
\begin{subfigure}[h]{0.25\textwidth}\centering\includegraphics[height=130pt]{figures3/sverkptsA.jpg}\caption{}\label{sub:svera}\end{subfigure}
~~%--
\begin{subfigure}[h]{0.25\textwidth}\centering\includegraphics[height=130pt]{figures3/sverkptsB.jpg}\caption{}\label{sub:sverb}\end{subfigure}
~~%--
\begin{subfigure}[h]{0.25\textwidth}\centering\includegraphics[height=130pt]{figures3/sverkptsC.jpg}\caption{}\label{sub:sverc}\end{subfigure}
~~%--
\begin{subfigure}[h]{0.35\textwidth}\centering\includegraphics[width=\textwidth]{figures3/sverkptsD.jpg}\caption{}\label{sub:sverd}\end{subfigure}
~~%--
\begin{subfigure}[h]{0.35\textwidth}\centering\includegraphics[width=\textwidth]{figures3/sverkptsE.jpg}\caption{}\label{sub:svere}\end{subfigure}
~~%--
\begin{subfigure}[h]{0.35\textwidth}\centering\includegraphics[width=\textwidth]{figures3/sverkptsF.jpg}\caption{}\label{sub:sverf}\end{subfigure}
~~%--
\begin{subfigure}[h]{0.35\textwidth}\centering\includegraphics[width=\textwidth]{figures3/sverkptsG.jpg}\caption{}\label{sub:sverg}\end{subfigure}
\caption[Spatial verification]{
    % ---
    An example of spatial verification process. The three images on the top show~\cref{sub:svera} the original
    matches, \Cref{sub:sverb} the best set of inliers from affine hypothesis generation, and \Cref{sub:sverc} the
    final set of homography inliers. The images on the bottom show~\cref{sub:sverd,sub:sverf} the matching images
    warped and superimposed by both the best affine \Cref{sub:svere} and estimated homography
    transformation~\cref{sub:sverg}.
    % ---
}
\label{fig:sver}
\end{figure}
}



% TODO; http://tex.stackexchange.com/questions/75014/is-it-possible-to-make-a-reference-to-a-subfigure-to-appear-figure-2a-with-cle

\begin{comment}
        python -m ibeis.viz.viz_chip --test-show_chip --weight_label=None --ecc --aid 44  --dpath ~/latex/crall-candidacy-2015/figures3 --save pzaffkpts.jpg --label pzkptstype --dpi=180 --clipwhite --diskshow --darken
        python -m ibeis.viz.viz_chip --test-show_chip --weight_label=None --ecc --aid 44  --dpath ~/latex/crall-candidacy-2015/figures3 --save pzcirckpts.jpg --label pzaffkpts --dpi=180 --clipwhite --diskshow --affine-invariance=False --augment_orientation=True --ori --darken
       
        python -m ibeis.viz.viz_chip --test-show_chip --weight_label=None --ecc --db GZ_Master1 --aid 1000  --dpath ~/latex/crall-candidacy-2015/figures3 --save gzaffkpts.jpg --label pzkptstype --dpi=180 --clipwhite --diskshow --darken
        python -m ibeis.viz.viz_chip --test-show_chip --weight_label=None --ecc --db GZ_Master1 --aid 1000  --dpath ~/latex/crall-candidacy-2015/figures3 --save gzcirckpts.jpg --label pzaffkpts --dpi=180 --clipwhite --diskshow --affine-invariance=False --augment_orientation=True --ori --darken
\end{comment}

\MultiImageCommandII{kptstype}{.45}{
    Keypoint detection
}{
% ---
Many affine keypoints detected on plains zebras tend to encompass only one or two stripes. The distinctive stripe
patterns on Gr√©vy's zebras are well captured by affine keypoints, whereas circular keypoints are more spread out.
For visibility this figure shows a random sample of all keypoints on a darkened image. Elliptical keypoints
in~\cref{sub:kptstypeA,sub:kptstypeC} are colored by eccentricity and circular keypoints
in~\cref{sub:kptstypeB,sub:kptstypeD}  are colored by scale.
% ---
}{figures3/pzaffkpts.jpg}{figures3/pzcirckpts.jpg}{figures3/gzaffkpts.jpg}{figures3/gzcirckpts.jpg}



\begin{comment}
python -m ibeis.viz.viz_nearest_descriptors --test-show_nearest_descriptors --db PZ_MTEST --qaid 3 --qfx 1062 --usetex --texknormplot --show 

python -m ibeis.viz.viz_nearest_descriptors --test-show_nearest_descriptors --db PZ_MTEST --qaid 3 --qfx 1062 --usetex --texknormplot --diskshow --saveparts --save figures3/knorm.png --dpi=256 --figsize 30 40  --dpath ~/latex/crall-candidacy-2015/ --hspace .1 --labelsize=42 --reshape 2

879?
%python -m ibeis.viz.viz_nearest_descriptors --test-show_nearest_descriptors --db PZ_MTEST --qaid 3 --qfx 'special' --usetex --texknormplot --show 
python -m ibeis.viz.viz_nearest_descriptors --test-show_nearest_descriptors --db testdb1  --show --qfx 1 

python -m ibeis.viz.interact.interact_matches --test-testdata_match_interact --show --db PZ_MTEST --qaid 3
\end{comment}
\newcommand{\knorm}{
\begin{figure}[ht!]
\centering
\begin{subfigure}[h]{0.18\textwidth} \centering \includegraphics[width=\textwidth]{figures3/knormA.png}\caption{}\label{sub:knorma} \end{subfigure}
~~% --
\begin{subfigure}[h]{0.18\textwidth} \centering \includegraphics[width=\textwidth]{figures3/knormC.png}\caption{}\label{sub:knormb} \end{subfigure}
~~% --
\begin{subfigure}[h]{0.18\textwidth} \centering \includegraphics[width=\textwidth]{figures3/knormE.png}\caption{}\label{sub:knormc} \end{subfigure}
~~% --
\begin{subfigure}[h]{0.18\textwidth} \centering \includegraphics[width=\textwidth]{figures3/knormG.png}\caption{}\label{sub:knormd} \end{subfigure}
~~% --
\begin{subfigure}[h]{0.18\textwidth} \centering \includegraphics[width=\textwidth]{figures3/knormI.png}\caption{}\label{sub:knorme} \end{subfigure}
~~% --
\begin{subfigure}[h]{0.18\textwidth} \centering \includegraphics[width=\textwidth]{figures3/knormB.png}\caption{}\label{sub:knormf} \end{subfigure}
~~% --
\begin{subfigure}[h]{0.18\textwidth} \centering \includegraphics[width=\textwidth]{figures3/knormD.png}\caption{}\label{sub:knormg} \end{subfigure}
~~% --
\begin{subfigure}[h]{0.18\textwidth} \centering \includegraphics[width=\textwidth]{figures3/knormF.png}\caption{}\label{sub:knormh} \end{subfigure}
~~% --
\begin{subfigure}[h]{0.18\textwidth} \centering \includegraphics[width=\textwidth]{figures3/knormH.png}\caption{}\label{sub:knormi} \end{subfigure}
~~% --
\begin{subfigure}[h]{0.18\textwidth} \centering \includegraphics[width=\textwidth]{figures3/knormJ.png}\caption{}\label{sub:knormj} \end{subfigure}
\caption[\caplbl{knorm}LNBNN feature correspondence scoring]{
% ---
\caplbl{knorm} The four nearest neighbors of a distinctive query feature~\cref{sub:knormf}. The bottom row shows
the warped and normalized features with their SIFT descriptors overlaid. The top row shows the annotation from
which each feature was extracted. The first two neighbors~\cref{sub:knormg,sub:knormh} are correct matches, the
third neighbor~\cref{sub:knormi} is an incorrect match, and the fourth neighbor~\cref{sub:knormj} is used as an
LNBNN normalizer to score the first three matches. 
% ---
}
\label{fig:knorm}
\end{figure}
}
